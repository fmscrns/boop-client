{% extends "layout.html" %}
{% from "component/navbar.html" import loaded_navbar %}

{% block content %}
    {{ loaded_navbar(current_user) }}
    <div class="container-fluid d-flex justify-content-center pt-5 my-3">
        hello, {{ current_user["name"] }}!
    </div>
    <div class="container-fluid d-flex justify-content-center pt-5 my-3">
        <div class="d-flex flex-column w-50">           
            {% if createPostForm %}
                {% if current_user["public_id"] == current_user["public_id"] %}
                    <button type="button" class="btn btn-primary btn-block" data-toggle="modal" data-target="#createPostModal">
                        Create post
                    </button>
                    <div class="modal fade" id="createPostModal" data-backdrop="static" data-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
                        <div class="modal-dialog modal-dialog-scrollable">
                        <form class="modal-content" method="POST" action="{{ url_for('post.create') }}" enctype="multipart/form-data">
                            <div class="modal-header">
                            <h5 class="modal-title" id="staticBackdropLabel">Create post</h5>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                            </div>
                            <div class="modal-body">
                                {{ createPostForm.hidden_tag() }}
                                {{ createPostForm.pinboard_input(class="d-none") }}
                                {{ createPostForm.confiner_input(class="d-none") }}
                                <div class="form-group">
                                    {{ createPostForm.photo_input.label }}
                                    {{ createPostForm.photo_input(class="form-control form-control-sm") }}
                                </div>
                                <div class="form-group">
                                    {{ createPostForm.content_input.label }}
                                    {{ createPostForm.content_input(class="form-control form-control-sm") }}
                                </div>
                                <div class="form-group">
                                    {{ createPostForm.subject_input.label }}
                                    {{ createPostForm.subject_input(class="form-control form-control-sm") }}
                                </div>
                            </div>
                            <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                            {{ createPostForm.submit_input(class="btn btn-primary") }}
                            </div>
                        </form>
                        </div>
                    </div>
                    <ul class="nav row m-0 border rounded mt-3">
                        <li class="nav-item col d-flex justify-content-center">
                          <a class="nav-link active" href="">Feed</a>
                        </li>
                    </ul>
                {% endif %}
                {% for post in post_list %}
                    <div class="container-fluid border p-4 mt-3">
                        <div class="d-flex flex-row">
                            <img src="{{ config.MEDIA_STORAGE + post['photo'] }}" alt="..." class="rounded d-block w-25 border">
                            <div class="d-flex flex-column ml-2 container">
                                <a href="{{ url_for('user.pets', username=post.creator_username) }}" class="lead">{{ post.creator_name }}</a>
                                <br>
                                <a href="{{ url_for('post.comments', post_pid=post.public_id) }}">Content: {{ post.content }}</a>
                                <span>Registered on: {{ post.registered_on }}</span>
                                {% if post.pinboard_id %}
                                    <span>Within business: <a href="{{ url_for('business.posts', business_pid=post.pinboard_id) }}">{{ post.pinboard_name }}</a></span>
                                {% endif %}
                                {% if post.confiner_id %}
                                    <span>Within circle: <a href="{{ url_for('circle.posts', circle_pid=post.confiner_id) }}">{{ post.confiner_name }}</a></span>
                                {% endif %}
                                <span>
                                    Tagged pets:
                                    <div class="d-flex flex-row">
                                        {% for subject in post.subject %}
                                            <a href="{{ url_for('pet.posts', pet_pid=subject.public_id) }}" class="badge bg-light">{{ subject.name }}</a>
                                        {% endfor %}
                                    </div>
                                </span>
                            </div>
                        </div>
                    </div>
                {% endfor %}
                <nav aria-label="Page navigation">
                    <ul class="pagination rounded mt-3 justify-content-center">
                      <li class="page-item disabled">
                        <a class="page-link" href="#" tabindex="-1">Previous</a>
                      </li>
                      <li class="page-item"><a class="page-link" href="#">1</a></li>
                      <li class="page-item"><a class="page-link" href="#">2</a></li>
                      <li class="page-item"><a class="page-link" href="#">3</a></li>
                      <li class="page-item">
                        <a class="page-link" href="#">Next</a>
                      </li>
                    </ul>
                </nav>
            {% endif %}
        </div> 
    </div>
{% endblock %}





